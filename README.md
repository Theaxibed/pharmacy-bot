# üè• Pharmacy Bot ‚Äî –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
pharmacy-bot/
‚îú‚îÄ‚îÄ bot/handlers/admin.py   # –∫–æ–º–∞–Ω–¥—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
‚îú‚îÄ‚îÄ bot/handlers/user.py    # –∫–æ–º–∞–Ω–¥—ã –º–µ–¥–ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª–µ–π
‚îú‚îÄ‚îÄ bot/main.py             # –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞
‚îú‚îÄ‚îÄ api/routes/products.py  # API –∫–∞—Ç–∞–ª–æ–≥
‚îú‚îÄ‚îÄ api/routes/orders.py    # API –∑–∞—è–≤–∫–∏
‚îú‚îÄ‚îÄ api/sheets.py           # Google Sheets –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ db/models.py            # –º–æ–¥–µ–ª–∏ –ë–î
‚îú‚îÄ‚îÄ db/crud.py              # —Ä–∞–±–æ—Ç–∞ —Å –ë–î
‚îú‚îÄ‚îÄ frontend/index.html     # Mini App
‚îú‚îÄ‚îÄ main.py                 # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îî‚îÄ‚îÄ requirements.txt
```

---

## –®–∞–≥ 1 ‚Äî –°–æ–∑–¥–∞–π –±–æ—Ç–∞ –≤ Telegram

1. –ù–∞–ø–∏—à–∏ @BotFather: `/newbot`
2. –°–æ—Ö—Ä–∞–Ω–∏ **BOT_TOKEN**
3. –ù–∞—Å—Ç—Ä–æ–π –±–æ—Ç–∞: `/mybots` ‚Üí –≤—ã–±–µ—Ä–∏ –±–æ—Ç–∞ ‚Üí Bot Settings ‚Üí Menu Button ‚Üí Edit Menu Button URL
   (URL –¥–æ–±–∞–≤–∏–º –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è)

---

## –®–∞–≥ 2 ‚Äî Google Sheets

1. –ó–∞–π–¥–∏ –Ω–∞ https://console.cloud.google.com
2. –°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
3. APIs & Services ‚Üí Enable APIs ‚Üí –≤–∫–ª—é—á–∏:
   - **Google Sheets API**
   - **Google Drive API**
4. Credentials ‚Üí Create Credentials ‚Üí **Service Account**
   - –ù–∞–∑–≤–∞–Ω–∏–µ: pharmacy-bot
   - –†–æ–ª—å: Editor
5. –ù–∞–∂–º–∏ –Ω–∞ —Å–æ–∑–¥–∞–Ω–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç ‚Üí Keys ‚Üí Add Key ‚Üí JSON
6. –°–∫–∞—á–∞–π —Ñ–∞–π–ª ‚Äî —ç—Ç–æ —Ç–≤–æ–π `credentials.json`
7. –°–æ–∑–¥–∞–π Google –¢–∞–±–ª–∏—Ü—É ‚Üí —Å–∫–æ–ø–∏—Ä—É–π ID –∏–∑ URL:
   `https://docs.google.com/spreadsheets/d/–í–û–¢_–≠–¢–û–¢_ID/edit`
8. –û—Ç–∫—Ä–æ–π —Ç–∞–±–ª–∏—Ü—É ‚Üí –ü–æ–¥–µ–ª–∏—Ç—å—Å—è ‚Üí –¥–æ–±–∞–≤—å email –∏–∑ credentials.json (–ø–æ–ª–µ `client_email`) –∫–∞–∫ **–†–µ–¥–∞–∫—Ç–æ—Ä–∞**

---

## –®–∞–≥ 3 ‚Äî –î–µ–ø–ª–æ–π –Ω–∞ Railway

1. –ó–∞–π–¥–∏ –Ω–∞ https://railway.app ‚Üí New Project ‚Üí Deploy from GitHub
2. –ó–∞–ª–µ–π –∫–æ–¥ –≤ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```bash
   git init
   git add .
   git commit -m "initial"
   git remote add origin https://github.com/–¢–í–û–ô_–ù–ò–ö/pharmacy-bot.git
   git push -u origin main
   ```
3. –í Railway: Variables ‚Üí –¥–æ–±–∞–≤—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```
BOT_TOKEN=—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather

ADMIN_IDS=—Ç–≤–æ–π_telegram_id,id_–≤—Ç–æ—Ä–æ–≥–æ_–∞–¥–º–∏–Ω–∞
# –£–∑–Ω–∞—Ç—å —Å–≤–æ–π ID: –Ω–∞–ø–∏—Å–∞—Ç—å @userinfobot –≤ Telegram

GOOGLE_SHEET_ID=id_—Ç–∞–±–ª–∏—Ü—ã

GOOGLE_CREDENTIALS_JSON={"type":"service_account","project_id":"...","private_key_id":"..."}
# –°–æ–¥–µ—Ä–∂–∏–º–æ–µ credentials.json ‚Äî –≤—Å—Ç–∞–≤—å –≤—Å—ë –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É (–º–∏–Ω–∏—Ñ–∏—Ü–∏—Ä—É–π JSON)

DATABASE_URL=sqlite+aiosqlite:///./pharmacy.db

WEBAPP_URL=https://–¢–í–û–ô-–ü–†–û–ï–ö–¢.up.railway.app
# –≠—Ç–æ—Ç URL —É–∑–Ω–∞–µ—à—å –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –¥–µ–ø–ª–æ—è –≤ Railway ‚Üí Settings ‚Üí Domains
```

4. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç –ø—Ä–∏ push –≤ GitHub

---

## –®–∞–≥ 4 ‚Äî –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Mini App –≤ BotFather

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ Railway –≤—ã–¥–∞—Å—Ç URL:

1. @BotFather ‚Üí `/mybots` ‚Üí –≤—ã–±–µ—Ä–∏ –±–æ—Ç–∞
2. **Bot Settings** ‚Üí **Menu Button** ‚Üí **Configure menu button**
3. –í—Å—Ç–∞–≤—å URL: `https://–¢–í–û-–ü–†–û–ï–ö–¢.up.railway.app`
4. –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏: `–ö–∞—Ç–∞–ª–æ–≥ –ø—Ä–µ–ø–∞—Ä–∞—Ç–æ–≤`

---

## –®–∞–≥ 5 ‚Äî –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–ø–∞—Ä–∞—Ç—ã (—á–µ—Ä–µ–∑ –±–æ—Ç–∞)

–ù–∞–ø–∏—à–∏ –±–æ—Ç—É (—Ç—ã –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ ADMIN_IDS):

```
/addproduct –ê–º–æ–∫—Å–∏—Ü–∏–ª–ª–∏–Ω 500–º–≥ | –ê–Ω—Ç–∏–±–∏–æ—Ç–∏–∫ —à–∏—Ä–æ–∫–æ–≥–æ —Å–ø–µ–∫—Ç—Ä–∞ | —É–ø–∞–∫ | 2000
/addproduct –ò–±—É–ø—Ä–æ—Ñ–µ–Ω 400–º–≥ | –ü—Ä–æ—Ç–∏–≤–æ–≤–æ—Å–ø–∞–ª–∏—Ç–µ–ª—å–Ω–æ–µ | —à—Ç | 5000
/addproduct –û–º–µ–ø—Ä–∞–∑–æ–ª 20–º–≥ | –ò–Ω–≥–∏–±–∏—Ç–æ—Ä –ø—Ä–æ—Ç–æ–Ω–Ω–æ–π –ø–æ–º–ø—ã | —É–ø–∞–∫ | 1500
```

–ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞:
```
/products
```

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤ –∏ –ª–∏–º–∏—Ç–æ–≤:
```
/setstock 1 1500      # —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Å—Ç–∞—Ç–æ–∫ –¥–ª—è –ø—Ä–µ–ø–∞—Ä–∞—Ç–∞ ID=1
/addstock 1 500       # –¥–æ–±–∞–≤–∏—Ç—å –∫ –æ—Å—Ç–∞—Ç–∫—É
/setlimit 1 200       # –ª–∏–º–∏—Ç 200 —à—Ç –∑–∞ 1 –∑–∞—è–≤–∫—É
```

–ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞—è–≤–æ–∫:
```
/orders
```

---

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤

| –ö–æ–º–∞–Ω–¥–∞ | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç |
|---------|-----------|
| `/products` | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø—Ä–µ–ø–∞—Ä–∞—Ç–æ–≤ —Å –æ—Å—Ç–∞—Ç–∫–∞–º–∏ |
| `/addproduct –ù–∞–∑–≤–∞–Ω–∏–µ \| –û–ø–∏—Å–∞–Ω–∏–µ \| –µ–¥ \| –∫–æ–ª-–≤–æ` | –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–ø–∞—Ä–∞—Ç |
| `/setstock [id] [–∫–æ–ª-–≤–æ]` | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Å—Ç–∞—Ç–æ–∫ |
| `/addstock [id] [–∫–æ–ª-–≤–æ]` | –ü–æ–ø–æ–ª–Ω–∏—Ç—å –æ—Å—Ç–∞—Ç–æ–∫ |
| `/setlimit [id] [–ª–∏–º–∏—Ç]` | –ú–∞–∫—Å –∫–æ–ª-–≤–æ –∑–∞ 1 –∑–∞—è–≤–∫—É |
| `/orders` | –ü–æ—Å–ª–µ–¥–Ω–∏–µ 10 –∑–∞—è–≤–æ–∫ |
| `/adminhelp` | –°–ø—Ä–∞–≤–∫–∞ |

---

## –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

```bash
cd pharmacy-bot
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt

cp .env.example .env
# –ó–∞–ø–æ–ª–Ω–∏ .env —Å–≤–æ–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏

# –õ–æ–∫–∞–ª—å–Ω–æ –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ polling:
python bot/main.py

# API –æ—Ç–¥–µ–ª—å–Ω–æ:
uvicorn main:app --reload
```
